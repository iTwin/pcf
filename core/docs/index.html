<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@itwin/pcf</title><meta name="description" content="Documentation for @itwin/pcf"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@itwin/pcf</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>@itwin/pcf</h2></div>
<div class="tsd-panel tsd-typography"><p><a href="https://dev.azure.com/bentleycs/iModelTechnologies/_build/latest?definitionId=5431&amp;branchName=main"><img src="https://dev.azure.com/bentleycs/iModelTechnologies/_apis/build/status/iTwin.pcf?branchName=main" alt="Build Status"></a>
<a href="https://www.npmjs.com/package/@itwin/pcf"><img src="https://img.shields.io/npm/v/@itwin/pcf" alt="@itwin/pcf on npm"></a></p>

<a href="#table-of-contents" id="table-of-contents" style="color: inherit; text-decoration: none;">
  <h1>Table of Contents</h1>
</a>
<ul>
<li><a href="#about">About</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#pcf-constructs">PCF Constructs</a></li>
<li><a href="#tutorial">Tutorial</a><ul>
<li><a href="https://github.com/iTwin/pcf/tree/main#pick-or-extend-aloader">Pick or extend a loader</a></li>
<li><a href="https://github.com/iTwin/pcf/tree/main#understand-the-irmodel">Understand the IR Model</a></li>
<li><a href="https://github.com/iTwin/pcf/tree/main#define-mappings-with-dynamic-mappingobjects-dmo">Define mappings with Dynamic Mapping Objects (DMO)</a></li>
<li><a href="https://github.com/iTwin/pcf/tree/main#sketch-out-imodel-hierarchy-with-nodes-and-attachdmos">Sketch out iModel hierarchy with Nodes and attach DMO&#39;s</a></li>
<li><a href="https://github.com/iTwin/pcf/tree/main#programmatically-generate-constructs">Programmatically Generate Constructs</a></li>
</ul>
</li>
<li><a href="#faq">FAQ</a></li>
<li><a href="#install-from-source">Install from source</a></li>
<li><a href="https://github.com/iTwin/pcf/wiki">In-depth Concepts</a></li>
</ul>

<a href="#about" id="about" style="color: inherit; text-decoration: none;">
  <h1>About</h1>
</a>
<p>Parametric Connector Framework (PCF) follows a declarative paradigm and aims to make modern IDE the new user interface for modeling &amp; synchronizing data with digital twins. It allows you to <strong>define</strong> your iModel as code then it takes care of the steps to synchronize it with external data to your desired state. It requires minimal programming experience and domain knowledge so any developer can quickly write a <a href="https://www.itwinjs.org/learning/imodel-connectors/">Connector</a> that just works and scales.</p>

<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
  <h1>Getting Started</h1>
</a>
<pre><code class="language-sh"><span class="hl-0"># make sure your npm version is &lt; 7.0.0</span><br/><span class="hl-1">npm --version</span><br/><span class="hl-0"># run this command if you npm version is &gt; 7.0.0</span><br/><span class="hl-1">npm install -g npm@6.x</span>
</code></pre>
<pre><code class="language-sh"><span class="hl-0"># 1. install global pcf command line utility</span><br/><span class="hl-1">npm install -g @itwin/pcf-cli</span><br/><br/><span class="hl-0"># 2. initialize a connector template. Change &quot;MyProject&quot; to your desired project name.</span><br/><span class="hl-1">pcf init MyProject</span><br/><span class="hl-2">cd</span><span class="hl-1"> MyProject</span><br/><br/><span class="hl-0"># 3. install the latest version of pcf core in your project</span><br/><span class="hl-1">npm install @itwin/pcf</span><br/><br/><span class="hl-0"># 4. add application specific info in ./src/App.ts</span><br/><br/><span class="hl-0"># 5. execute your connector (compilation is included in this command)</span><br/><span class="hl-1">npm run start</span>
</code></pre>
<p>You usually do not need to install any iTwin.js related dependencies besides <a href="https://www.npmjs.com/search?q=%40bentley%20schema%20">domain schema npm packages</a> (<code>`@bentley/${schemaName}-schema`</code>) since most iTwin.js libraries are automatically installed as you install @itwin/pcf. If you do, you must make sure that they share the same version string as the ones installed by PCF, otherwise you may encounter unknown errors.</p>
<p>Currently, all the documentations and API references of this project are embedded in source files. Use your IDE/language server to look them up through go-to-definitions.</p>

<a href="#pcf-constructs" id="pcf-constructs" style="color: inherit; text-decoration: none;">
  <h1>PCF Constructs</h1>
</a>
<p>You will be using a set of constructs to build your connector.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Definition</th>
</tr>
</thead>
<tbody><tr>
<td><strong>IR Model</strong> &nbsp;&nbsp;</td>
<td>An intermediate representation virtual Entity-Relationship store generated by a <strong>Loader</strong> from your source data. <br> It is made of three classes: <br> <strong>IR Entity</strong> = External Class (e.g. database table). <br> <strong>IR Relationship</strong> = External Relationship Class (e.g. database link table or table that contains foreign key relationships). <br> <strong>IR Instance</strong> = the instances of an External Class (e.g. a row in database table)</td>
</tr>
<tr>
<td><strong>Loader</strong></td>
<td>An accessor to a data source. Responsible for converting the source data into an IR Model. You may use an existing Loader or write your own.</td>
</tr>
<tr>
<td><strong>DMO</strong></td>
<td>A DMO (Dynamic Mapping Object) defines the mappings between IR Model and iModel.</td>
</tr>
<tr>
<td><strong>Node</strong></td>
<td>A Node corresponds to an EC Entity and some Nodes use DMO to populate multiple EC Instances. An iModel is synchronized based on user-defined Nodes.</td>
</tr>
</tbody></table>

<a href="#tutorial" id="tutorial" style="color: inherit; text-decoration: none;">
  <h1>Tutorial</h1>
</a>
<p><strong>You may have difficulty understanding this tutorial without a basic understanding of <a href="https://www.itwinjs.org/bis/">BIS</a>.</strong></p>
<p>It&#39;s important to first see an overall picture of what a Connector does:</p>
<ol>
<li>Read source data </li>
<li>Define mappings (and transform geometries)</li>
<li>Attach mappings to the iModel elements</li>
</ol>
<p>Next, we will go over them in order and show how they are handled by PCF constructs.</p>

<a href="#pick-or-extend-a-loader" id="pick-or-extend-a-loader" style="color: inherit; text-decoration: none;">
  <h3>Pick or extend a Loader</h3>
</a>
<p><img src="https://github.com/iTwin/pcf/blob/main/docs/LoaderDiagram.png" alt="LoaderDiagram"></p>
<p>X could be any data source. (e.g., database, spreadsheet, API, etc.)</p>
<p>Similar to a keyboard driver for an operating system, Loader makes your data available to be consumed by a universal connector that is configured through Node &amp; DMO definitions. It is a lightweight object that&#39;s responsible for converting a type of source data into an intermediate representation model (IR Model) in memory, which can be interfaced and optimized independently of the source data.</p>
<p>You may need to write your own Loader if you need to customize the way of accessing source data. But before deciding to write one yourself, check out the existing ones or consider extending them. All loaders must extend the base class <a href="https://github.com/itwin/pcf/blob/main/core/src/loaders/Loader.ts">Loader</a>.</p>

<a href="#understand-the-ir-model" id="understand-the-ir-model" style="color: inherit; text-decoration: none;">
  <h3>Understand the IR Model</h3>
</a>
<p><img src="https://github.com/iTwin/pcf/blob/main/docs/IRModelDiagram.png" alt="IRModelDiagram"></p>
<p>IR Model is meant to be generic to represent all types of external data models. It is an in-memory store that consists of two types of object, IR Entity and IR Relationship, whose instances are called IR Instances.</p>
<p><a href="https://github.com/iTwin/pcf/wiki#intermediate-representation">What is IR Model for?</a></p>

<a href="#define-mappings-with-dynamic-mapping-objects-dmo" id="define-mappings-with-dynamic-mapping-objects-dmo" style="color: inherit; text-decoration: none;">
  <h3>Define mappings with Dynamic Mapping Objects (DMO)</h3>
</a>
<p><img src="https://github.com/iTwin/pcf/blob/main/docs/DMODiagram.png" alt="DMODiagram"></p>
<p>A collection of DMO&#39;s is the Single Source of Truth of the mappings from source data to an iModel. Each DMO controls the one-to-one mapping from an IR class to an EC class in iModel. PCF provides a default property mapping from IR Instance to iModel Element, in addition, DMO&#39;s could attach callbacks on each visit to override element property values.</p>
<pre><code class="language-typescript"><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">dmoA</span><span class="hl-1">: </span><span class="hl-6">ElementDMO</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-7">irEntity:</span><span class="hl-1"> </span><span class="hl-8">&quot;ExternalClassA&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">// use an existing class from BisCore schema</span><br/><span class="hl-1">  </span><span class="hl-7">ecElement:</span><span class="hl-1"> </span><span class="hl-8">&quot;BisCore:SpatialCategory&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">dmoB</span><span class="hl-1">: </span><span class="hl-6">pcf</span><span class="hl-1">.</span><span class="hl-6">ElementDMO</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-7">irEntity:</span><span class="hl-1"> </span><span class="hl-8">&quot;ExternalClassB&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">// create a dynamic class in iModel</span><br/><span class="hl-1">  </span><span class="hl-7">ecElement:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;ExternalClassB&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">baseClass:</span><span class="hl-1"> </span><span class="hl-7">PhysicalElement</span><span class="hl-1">.</span><span class="hl-7">classFullName</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-7">properties:</span><span class="hl-1"> [</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;BuildingNumber&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">type:</span><span class="hl-1"> </span><span class="hl-2">primitiveTypeToString</span><span class="hl-1">(</span><span class="hl-7">PrimitiveType</span><span class="hl-1">.</span><span class="hl-7">String</span><span class="hl-1">),</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      {</span><br/><span class="hl-1">        </span><span class="hl-7">name:</span><span class="hl-1"> </span><span class="hl-8">&quot;RoomNumber&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-7">type:</span><span class="hl-1"> </span><span class="hl-2">primitiveTypeToString</span><span class="hl-1">(</span><span class="hl-7">PrimitiveType</span><span class="hl-1">.</span><span class="hl-7">String</span><span class="hl-1">),</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">    ],</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">// callback to override property values or attach geometry streams to current element</span><br/><span class="hl-1">  </span><span class="hl-2">modifyProps</span><span class="hl-1">(</span><span class="hl-7">props</span><span class="hl-1">: </span><span class="hl-6">any</span><span class="hl-1">, </span><span class="hl-7">instance</span><span class="hl-1">: </span><span class="hl-6">IRInstance</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">props</span><span class="hl-1">.</span><span class="hl-7">buildingNumber</span><span class="hl-1"> = </span><span class="hl-7">instance</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-8">&quot;building_id&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-7">props</span><span class="hl-1">.</span><span class="hl-7">roomNumber</span><span class="hl-1"> = </span><span class="hl-7">instance</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-8">&quot;room_number&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-0">// props.geom = &lt;build geometry stream&gt;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">// callback to skip syncing an element</span><br/><span class="hl-1">  </span><span class="hl-2">doSyncInstance</span><span class="hl-1">(</span><span class="hl-7">instance</span><span class="hl-1">: </span><span class="hl-6">IRInstance</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-2">isValidId</span><span class="hl-1">(</span><span class="hl-7">instance</span><span class="hl-1">.</span><span class="hl-2">get</span><span class="hl-1">(</span><span class="hl-8">&quot;id&quot;</span><span class="hl-1">)) ? </span><span class="hl-4">true</span><span class="hl-1"> : </span><span class="hl-4">false</span><span class="hl-1">;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">// find class B instances with this foreign key column</span><br/><span class="hl-1">  </span><span class="hl-7">categoryAttr:</span><span class="hl-1"> </span><span class="hl-8">&quot;external_class_b_id&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">};</span>
</code></pre>
<p>Note:</p>
<ul>
<li>Only Primitive EC Properties can be added to DMO.ecElement/ecRelationship. They cannot be deleted once added.</li>
</ul>

<a href="#sketch-out-imodel-hierarchy-with-nodes-and-attach-dmo39s" id="sketch-out-imodel-hierarchy-with-nodes-and-attach-dmo39s" style="color: inherit; text-decoration: none;">
  <h3>Sketch out iModel hierarchy with Nodes and attach DMO&#39;s</h3>
</a>
<p><img src="https://github.com/iTwin/pcf/blob/main/docs/NodeTree.png" alt="NodeTree"></p>
<p>A collection of Nodes is the Single Source of Truth of the hierarchy of a subject tree in iModel. You now gain the freedom to organize the content of your iModel as if it&#39;s a file system by passing around Nodes. It&#39;s important to know that the ordering of Nodes matters as they are synchronized in the same order as defined. Since the dependencies between Nodes are constrained by the fact that a variable cannot be referenced until it&#39;s defined in a programming language, we can guarantee that the elements inside an iModel are always synchronized in the correct order without hardcoding the logic anywhere.</p>
<p>ElementNode &amp; RelationshipNode must attach a DMO so that they can populate multiple instances of EC Elements &amp; Relationships in iModel based on the instances of external data.</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">*</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-8">&quot;@itwin/pcf&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-7">dmoA</span><span class="hl-1">, </span><span class="hl-7">dmoB</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-8">&quot;./dmos/Elements.ts&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-7">dmoC</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-8">&quot;./dmos/RelatedElements.ts&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-6">SampleConnector</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-6">pcf</span><span class="hl-1">.</span><span class="hl-6">PConnector</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-2">form</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-0">// skip some config ...</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">subjectA</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">SubjectNode</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">, { </span><span class="hl-7">key:</span><span class="hl-1"> </span><span class="hl-8">&quot;SubjectA&quot;</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">defModel</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">ModelNode</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">, { </span><span class="hl-7">key:</span><span class="hl-1"> </span><span class="hl-8">&quot;ModelA&quot;</span><span class="hl-1">, </span><span class="hl-7">subject:</span><span class="hl-1"> </span><span class="hl-7">subjectA</span><span class="hl-1">, </span><span class="hl-7">modelClass:</span><span class="hl-1"> </span><span class="hl-7">DefinitionModel</span><span class="hl-1">, </span><span class="hl-7">partitionClass:</span><span class="hl-1"> </span><span class="hl-7">DefinitionPartition</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">phyModel</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">ModelNode</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">, { </span><span class="hl-7">key:</span><span class="hl-1"> </span><span class="hl-8">&quot;ModelB&quot;</span><span class="hl-1">, </span><span class="hl-7">subject:</span><span class="hl-1"> </span><span class="hl-7">subjectA</span><span class="hl-1">, </span><span class="hl-7">modelClass:</span><span class="hl-1"> </span><span class="hl-7">PhysicalModel</span><span class="hl-1">, </span><span class="hl-7">partitionClass:</span><span class="hl-1"> </span><span class="hl-7">PhysicalPartition</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">sptCategory</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">ElementNode</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">, { </span><span class="hl-7">key:</span><span class="hl-1"> </span><span class="hl-8">&quot;CategoryA&quot;</span><span class="hl-1">, </span><span class="hl-7">model:</span><span class="hl-1"> </span><span class="hl-7">defModel</span><span class="hl-1">, </span><span class="hl-7">dmo:</span><span class="hl-1"> </span><span class="hl-7">dmoA</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">phyElement</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">ElementNode</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">, { </span><span class="hl-7">key:</span><span class="hl-1"> </span><span class="hl-8">&quot;ElementB&quot;</span><span class="hl-1">, </span><span class="hl-7">model:</span><span class="hl-1"> </span><span class="hl-7">phyModel</span><span class="hl-1">, </span><span class="hl-7">dmo:</span><span class="hl-1"> </span><span class="hl-7">dmoB</span><span class="hl-1">, </span><span class="hl-7">category:</span><span class="hl-1"> </span><span class="hl-7">sptCategory</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">assembly</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">RelatedElementNode</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-7">key:</span><span class="hl-1"> </span><span class="hl-8">&quot;PhysicalElementAssemblesElementsA&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-7">subject:</span><span class="hl-1"> </span><span class="hl-7">subjectA</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-7">dmo:</span><span class="hl-1"> </span><span class="hl-7">dmoC</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-7">source:</span><span class="hl-1"> </span><span class="hl-7">phyElement</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-7">target:</span><span class="hl-1"> </span><span class="hl-7">phyElement</span><span class="hl-1">,</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code></pre>
<p>Read the following material if you&#39;re not familiar with concepts such as Element, Model and Relationship in iModel:</p>
<ul>
<li><a href="https://www.itwinjs.org/bis/intro/element-fundamentals/">Element Fundamentals</a></li>
<li><a href="https://www.itwinjs.org/bis/intro/model-fundamentals/">Model Fundamentals</a></li>
<li><a href="https://www.itwinjs.org/bis/intro/relationship-fundamentals/">Relationship Fundamentals</a></li>
</ul>
<p>Great articles to learn some background information to help you organize Nodes</p>
<ul>
<li><a href="https://www.itwinjs.org/bis/intro/information-hierarchy/">iModel information hierarchy</a></li>
<li><a href="https://www.itwinjs.org/bis/intro/fabric-of-the-universe/">Fabric of the universe</a></li>
</ul>
<p>Note:</p>
<ul>
<li>The following entity class cannot be deleted from your iModel once created: Subject, Partition, Model.</li>
<li>Modifying the key of SubjectNode or ModelNode would cause new Subject, Model, and Partition to be created.</li>
<li>Parent-child Modeling is not supported yet. Only the top models and their elements are synchronized.</li>
</ul>

<a href="#programmatically-generate-constructs" id="programmatically-generate-constructs" style="color: inherit; text-decoration: none;">
  <h3>Programmatically Generate Constructs</h3>
</a>
<p>Everything doesn&#39;t have to be static. You still have the freedom to dynamically generate DMO&#39;s &amp; Nodes based on a set of rules and data. Since your connector is represented purely by objects (DMOs &amp; Nodes), you can programmatically generate them based on external source data. See a sample below.</p>
<pre><code class="language-typescript"><br/><span class="hl-0">// inside XYZConnector.ts where Nodes are defined:</span><br/><br/><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">*</span><span class="hl-1"> </span><span class="hl-3">as</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-8">&quot;@itwin/pcf&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">export</span><span class="hl-1"> </span><span class="hl-4">class</span><span class="hl-1"> </span><span class="hl-6">XYZConnector</span><span class="hl-1"> </span><span class="hl-4">extends</span><span class="hl-1"> </span><span class="hl-6">pcf</span><span class="hl-1">.</span><span class="hl-6">PConnector</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-2">form</span><span class="hl-1">() {</span><br/><br/><span class="hl-1">    ...</span><br/><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">model</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">ModelNode</span><span class="hl-1">(...);</span><br/><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">data</span><span class="hl-1">: </span><span class="hl-6">any</span><span class="hl-1">[] = </span><span class="hl-0">// Define any logics to get the data necessary to generate PCF construct instances</span><br/><br/><span class="hl-1">    </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">item</span><span class="hl-1"> </span><span class="hl-4">of</span><span class="hl-1"> </span><span class="hl-7">data</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-0">// use data stored in &quot;item&quot; to populate the fields of DMO and/or Node</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">dmo</span><span class="hl-1">: </span><span class="hl-6">pcf</span><span class="hl-1">.</span><span class="hl-6">ElementDMO</span><span class="hl-1"> = ...</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-5">node</span><span class="hl-1"> = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">pcf</span><span class="hl-1">.</span><span class="hl-2">ElementNode</span><span class="hl-1">(</span><span class="hl-4">this</span><span class="hl-1">, { ..., </span><span class="hl-7">model</span><span class="hl-1">, </span><span class="hl-7">dmo</span><span class="hl-1"> } );</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/>
</code></pre>

<a href="#faq" id="faq" style="color: inherit; text-decoration: none;">
  <h1>FAQ</h1>
</a>
<blockquote>
<p>&quot;Wait… don&#39;t we need to write tests to ensure that the elements are correctly inserted/updated/deleted in all kinds of scenarios?&quot;</p>
</blockquote>
<p>PCF aims to eliminate the need for end applications to write tests. Looking back at what we did, we defined a bunch of objects as the inputs to PCF, which would handle the rest to synchronize the target iModel to our desired state through the objects. So long as their definitions are correct, PCF promises a successful synchronization.</p>
<blockquote>
<p>&quot;Okay… people make mistakes in configuration files all the time, how can I be confident that my definitions are correct for the objects?&quot;</p>
</blockquote>
<p>PCF enforces strict typing on objects through TypeScript so that functionalities such as code completion and code-refactoring available in most modern IDE&#39;s (e.g. Visual Studio Code) will help you to write the correct definitions for them.</p>
<p>Though runtime errors are minimized, there are still a few types of runtime errors that could not be discovered at compile time. For example, you may accidentally assign a PhysicalElement to a FunctionalModel this will fail because they are not of the same type. You should still have a very basic understanding of how information is organized in an iModel.</p>
<blockquote>
<p>&quot;Where did the API documentation for PCF go?&quot;</p>
</blockquote>
<p><img src="https://github.com/iTwin/pcf/blob/main/docs/LookupDefinition.png" alt="LookupDefinition"></p>
<p>They are all embedded in code. You will be working in a single context, your modern IDE. Why? You tend to do this anyway as you code and you always see the correct version of the documentation.</p>

<a href="#install-from-source" id="install-from-source" style="color: inherit; text-decoration: none;">
  <h1>Install from source</h1>
</a>

<a href="#pre-steps" id="pre-steps" style="color: inherit; text-decoration: none;">
  <h3>pre-steps:</h3>
</a>
<pre><code class="language-sh"><span class="hl-0"># clone PCF repo</span><br/><span class="hl-1">git clone https://github.com/iTwin/pcf.git</span><br/><br/><span class="hl-0"># install PCF core dependencies</span><br/><span class="hl-2">cd</span><span class="hl-1"> core</span><br/><span class="hl-1">npm ci</span><br/><br/><span class="hl-0"># build</span><br/><span class="hl-1">npm run build</span>
</code></pre>

<a href="#option-1-try-pcf-locally-with-your-connector" id="option-1-try-pcf-locally-with-your-connector" style="color: inherit; text-decoration: none;">
  <h3>Option 1: try PCF locally with your connector:</h3>
</a>
<pre><code class="language-sh"><span class="hl-0"># create global symlink</span><br/><span class="hl-1">npm link</span><br/><br/><span class="hl-0"># use @itwin/pcf package locally without installing it</span><br/><span class="hl-2">cd</span><span class="hl-1"> &lt;your connector project dir&gt;</span><br/><span class="hl-1">npm link @itwin/pcf</span>
</code></pre>

<a href="#option-2-run-pcf-unit-tests" id="option-2-run-pcf-unit-tests" style="color: inherit; text-decoration: none;">
  <h3>Option 2: run PCF unit tests:</h3>
</a>
<pre><code class="language-sh"><span class="hl-1">npm run </span><span class="hl-2">test</span>
</code></pre>

<a href="#inspired-by" id="inspired-by" style="color: inherit; text-decoration: none;">
  <h1>Inspired by</h1>
</a>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Compiler">Compiler Design</a></li>
<li><a href="https://en.wikipedia.org/wiki/Object%E2%80%93relational_mapping">Object-Relational Mapping</a></li>
<li><a href="https://github.com/aws/aws-cdk">AWS CDK</a></li>
<li><a href="https://github.com/hashicorp/terraform">Terraform</a></li>
</ul>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">@itwin/pcf</a>
<ul>
<li class="tsd-kind-module"><a href="modules/BaseApp.html">Base<wbr/>App</a></li>
<li class="tsd-kind-module"><a href="modules/DMO.html">DMO</a></li>
<li class="tsd-kind-module"><a href="modules/DynamicSchema.html">Dynamic<wbr/>Schema</a></li>
<li class="tsd-kind-module"><a href="modules/IRModel.html">IRModel</a></li>
<li class="tsd-kind-module"><a href="modules/LogCategory.html">Log<wbr/>Category</a></li>
<li class="tsd-kind-module"><a href="modules/Node.html">Node</a></li>
<li class="tsd-kind-module"><a href="modules/PConnector.html">PConnector</a></li>
<li class="tsd-kind-module"><a href="modules/Util.html">Util</a></li>
<li class="tsd-kind-module"><a href="modules/loaders.html">loaders</a></li>
<li class="tsd-kind-module"><a href="modules/loaders_JSONLoader.html">loaders/JSONLoader</a></li>
<li class="tsd-kind-module"><a href="modules/loaders_Loader.html">loaders/<wbr/>Loader</a></li>
<li class="tsd-kind-module"><a href="modules/loaders_SQLiteLoader.html">loaders/SQLite<wbr/>Loader</a></li>
<li class="tsd-kind-module"><a href="modules/loaders_XLSXLoader.html">loaders/XLSXLoader</a></li>
<li class="tsd-kind-module"><a href="modules/pcf.html">pcf</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>